<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Breaking down complex language features in C</title>
		
		<link rel="stylesheet" href="/global.css" />
	</head>
	<body class="container notification content">
		<h1>Breaking down complex language features in C</h1>
<p>Modern programming languages have a lot of useful features.
This includes traits, inheritance, operator overloding and many more.
I was making an <a href="https://github.com/InfiniteCoder01/OrCo">intermediate representation</a> to support all those features,
but it become overwelming, so here I am breaking those down.</p>
<p>We are gonna be using C to implement broken-down versions of patterns.
That is because C doesn’t have any of them. And manual memory management
will help us understand what is going on under the hood</p>
<h1>Methods</h1>
<ul>
<li><strong>Functions defined inside a class or object.</strong></li>
<li><strong>Found in: Java, Python, Ruby, C#, etc.</strong></li>
</ul>
<p>Starting off simple. Methods are essential feature of all modern programming languages.
And yet, C doesn’t have that. Let’s look at this simple example:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Game </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">    Vector2 playerPosition;
</span><span style="color:#eff1f5;">
</span><span style="color:#b48ead;">public</span><span style="color:#eff1f5;">:
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">void </span><span style="color:#8fa1b3;">update</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">float </span><span style="color:#bf616a;">deltaTime</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        playerPosition.</span><span style="color:#bf616a;">x </span><span style="color:#c0c5ce;">+=</span><span style="color:#eff1f5;"> deltaTime;
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">}
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">int </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">    Game game;
</span><span style="color:#c0c5ce;">    game.</span><span style="color:#8fa1b3;">update</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">0.1</span><span style="color:#c0c5ce;">);
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">;
</span><span style="color:#c0c5ce;">}
</span></pre>
<p>Here we can see a class, that has a field called player_position and a method called update.
But how does this method knows about player_position? Let’s transform the example:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Game </span><span style="color:#eff1f5;">{
</span><span style="color:#65737e;">// &lt;...&gt;
</span><span style="color:#eff1f5;">    </span><span style="color:#b48ead;">void </span><span style="color:#8fa1b3;">update</span><span style="color:#eff1f5;">(</span><span style="color:#b48ead;">float </span><span style="color:#bf616a;">deltaTime</span><span style="color:#eff1f5;">) {
</span><span style="color:#eff1f5;">        </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">-&gt;</span><span style="color:#bf616a;">playerPosition</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">x </span><span style="color:#c0c5ce;">+=</span><span style="color:#eff1f5;"> deltaTime; </span><span style="color:#65737e;">// Added `this-&gt;`
</span><span style="color:#eff1f5;">    }
</span><span style="color:#eff1f5;">}
</span><span style="color:#65737e;">// &lt;...&gt;
</span></pre>
<p>After this change, we can see that all class members are actually accessed using <code>this</code> pointer under the hood.
But where does it come from? Let’s imagine it was in python:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">Game</span><span style="color:#eff1f5;">:
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;"># &lt;...&gt;
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">update</span><span style="color:#c0c5ce;">(</span><span style="color:#bf616a;">self</span><span style="color:#c0c5ce;">, </span><span style="color:#bf616a;">delta_time</span><span style="color:#c0c5ce;">: float):
</span><span style="color:#c0c5ce;">        </span><span style="color:#bf616a;">self</span><span style="color:#c0c5ce;">.player_position.x += delta_time
</span><span style="color:#65737e;"># &lt;...&gt;
</span></pre>
<p>AHA! <code>self</code> (alternative to C++’s <code>this</code>) comes as a special argument!
We can now try to replicate this in C:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">typedef struct</span><span style="color:#c0c5ce;"> Game {
</span><span style="color:#c0c5ce;">    Vector2 player_position;
</span><span style="color:#c0c5ce;">} Game;
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">void </span><span style="color:#8fa1b3;">game_update</span><span style="color:#c0c5ce;">(Game* </span><span style="color:#bf616a;">game</span><span style="color:#c0c5ce;">, </span><span style="color:#b48ead;">float </span><span style="color:#bf616a;">delta_time</span><span style="color:#c0c5ce;">) {
</span><span style="color:#c0c5ce;">    game-&gt;player_position.</span><span style="color:#bf616a;">x </span><span style="color:#c0c5ce;">+= delta_time;
</span><span style="color:#c0c5ce;">}
</span></pre>
<h1>Modules</h1>
<ul>
<li><strong>A way to organize code into separate files or namespaces.</strong></li>
<li><strong>Found in: Python, JavaScript, Ruby, TypeScript.</strong></li>
</ul>
<p><strong>TODO!</strong></p>

	</body>
</html>
